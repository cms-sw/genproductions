SysCalc 
*******
By: The MadGraph team
*******

SysCalc is a package that calculates event weights due to systematical uncertainties.
It requires as input file a systematics file (as generated by MadGraph 5 v. 1.6.0 or 
later plus the Pythia-PGS package v. 2.2.0 or later), and outputs an XML file with 
the uncertainties. It also requires a configuration file specifying the parameters 
to be varied. 
SysCalc uses TinyXML2 for XML parsing, see https://github.com/leethomason/tinyxml2.

Usage: sys_calc sysfile configfile outfile

Note that compilation and running requires LHAPDF to be installed on the system.

The configuration file should look as follows (example):

# Central scale factors
scalefact: 
0.5 1 2
# Scale correlation 
# Special value -1: all combination (N**2)
# Special value -2: only correlated variation
# Otherwise list of index N*fac_index + ren_index #index starts at 0
scalecorrelation:
-1
# \alpha_s emission scale factors
alpsfact:
0.5 1 2
# matching scales
matchscale:
32 50 80
# PDF sets and number of members (optional)
PDF:
CT10.LHgrid 53
MSTW2008nlo68cl.LHgrid

The output file has the following format (LHEF version 3 format):
Header:
<header>
<initrwgt>
  <weightgroup type="Central scale variation" combine="envelope">
    <weight id="1"> mur=0.5 muf=0.5 </weight>
    <weight id="2"> mur=1 muf=0.5 </weight>
    <weight id="3"> mur=2 muf=0.5 </weight>
    <weight id="4"> mur=0.5 muf=1 </weight>
    <weight id="5"> mur=1 muf=1 </weight>
    <weight id="6"> mur=2 muf=1 </weight>
    <weight id="7"> mur=0.5 muf=2 </weight>
    <weight id="8"> mur=1 muf=2 </weight>
    <weight id="9"> mur=2 muf=2 </weight>
  </weightgroup>
  <weightgroup type="Emission scale variation" combine="envelope">
    <weight id="10"> alpsfact=0.5</weight>
    <weight id="11"> alpsfact=1</weight>
    <weight id="12"> alpsfact=2</weight>
  </weightgroup>
  <weightgroup type="CT10nlo.LHgrid" combine="hessian">
    <weight id="13">Member 0</weight>
    <weight id="14">Member 1</weight>
    <weight id="15">Member 2</weight>
    <weight id="16">Member 3</weight>
    ...
    <weight id="65">Member 52</weight>
  </weightgroup>
</initrwgt>
</header>


Each event:
<rwgt>
  <wgt id="1">83214.7</wgt>
  <wgt id="2">61460</wgt>
  <wgt id="3">47241.9</wgt>
  <wgt id="4">101374</wgt>
  <wgt id="5">74872</wgt>
  <wgt id="6">57551.1</wgt>
  <wgt id="7">116174</wgt>
  <wgt id="8">85802.5</wgt>
  <wgt id="9">65953</wgt>
  ...
  <wgt id="64">34893.5</wgt>
  <wgt id="65">41277</wgt>
</rwgt>
Johan Alwall, Alexis Kalogeropoulos, Olivier Mattelaer

