local variable 'error' referenced before assignment